var f;function g(){this.c=null;this.ca=0;if(window.ea)for(var a=[j,k,l,m,n,p],b=navigator.userAgent.toLowerCase(),d=0;d<a.length;d++){var c=a[d];if(b.indexOf(c)!=-1){this.c=c;if(RegExp(c+"[ /]?([0-9]+(.[0-9]+)?)").exec(b)!=null)this.ca=parseFloat(RegExp.$1);break}}}var r,j="opera",k="ie",l="safari",m="firefox",n="netscape",p="mozilla";function s(){r||(r=new g);return r};function t(){u(window,"resize",v(this,this.u));u(window,"scroll",v(this,this.u))}var w;
t.prototype.show=function(a,b,d){this.close();var c=self.pageYOffset;if(typeof c=="undefined")c=document.documentElement.scrollTop;var e=document.createElement("div");e.style.position="absolute";e.style.left="0px";e.style.top=c+"px";e.style.width="100%";e.style.height="100%";e.style.zIndex=1E4;x(e,0.25);document.body.appendChild(e);e.style.backgroundColor="black";this.a=a;this.D=a.parentNode;this.d=e;this.s=d;if(a.parentNode){a.parentNode.removeChild(a);a.style.display=""}y(a,v(this,function(h,o){this.da=
h;this.K=o;var i=document.createElement("div");i.style.position="absolute";i.style.width=h+"px";i.style.height=o+"px";i.style.zIndex=10001;i.appendChild(a);this.g=i;this.u();a.style.display="";document.body.appendChild(i);b&&b()}),0)};
t.prototype.close=function(){if(this.d){this.d.parentNode.removeChild(this.d);this.d=null}if(this.g){this.g.parentNode.removeChild(this.g);this.g=null}if(this.a){this.a.parentNode&&this.a.parentNode.removeChild(this.a);if(this.D){this.a.style.display="none";this.D.appendChild(this.a)}}if(this.s){this.s();this.s=null}};
t.prototype.u=function(){if(this.d&&this.g){var a=self.pageYOffset;if(typeof a=="undefined")a=document.documentElement.scrollTop;var b=Math.floor((this.d.offsetWidth-this.da)/2),d=Math.floor((this.d.offsetHeight-this.K)/2)+a;this.d.style.top=a+"px";this.g.style.left=b+"px";this.g.style.top=d+"px"}};function x(a,b){if(s().c==k)a.style.filter="alpha(opacity="+Math.round(b*100)+")";else a.style.opacity=b}function z(a){if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true}function A(a){if(!a)a=window.event;if(a.preventDefault)a.preventDefault();else a.returnValue=false};function B(a,b,d){this.a=a;this.J=b;a=d||a;u(a,"mousedown",v(this,this.Q));a.U=C;a.unselectable="on";a.style.MozUserSelect="none";a.style.cursor="default";this.A=a.setCapture?a:window;u(this.A,"mouseup",v(this,this.S))}
B.prototype.Q=function(a){var b;if(!(b=this.ga)){if(!(b=this.o)){b=s();b=b.c==m||b.c==p||b.c==n?a.button==0:a.button==1;b=!b}b=b}if(!b){b=this.a;if(b.parentNode.style.position!="absolute")b.parentNode.style.position="relative";if(b.style.position!="absolute"){var d=b.offsetTop,c=b.offsetWidth,e=b.offsetHeight;b.style.left=b.offsetLeft+"px";b.style.top=d+"px";b.style.width=c+"px";b.style.height=e+"px";b.style.position="absolute"}this.G=a.screenX;this.H=a.screenY;this.X=(new Date).getTime();this.Y=
a.screenX;this.Z=a.screenY;a=this.A;a.setCapture&&a.setCapture(true);this.o=u(a,"mousemove",v(this,this.R));D(this,"dragstart")}};
B.prototype.S=function(a){if(this.o){var b=this.o,d=E();if(F(d,b.j)){var c=b.j;if(c.removeEventListener)c.removeEventListener(b.n,b.l,false);else b.j.detachEvent&&c.detachEvent("on"+b.n,b.l)}else(c=b.j["__event__"+b.n])&&G(c,b.l);G(d.z,b);(d=b.j.__event_listeners__)&&G(d,b);this.o=null;document.releaseCapture&&document.releaseCapture();D(this,"dragend")}(new Date).getTime()-this.X<=500&&Math.abs(this.Y-a.screenX)<=2&&Math.abs(this.Z-a.screenY)<=2&&D(this,"click",a)};
B.prototype.R=function(a){var b=a.screenX-this.G,d=a.screenY-this.H;this.G=a.screenX;this.H=a.screenY;a=this.a;b=a.offsetLeft+b;d=a.offsetTop+d;if(this.J){var c=a.parentNode.offsetHeight-a.offsetHeight;b=Math.max(0,Math.min(b,a.parentNode.offsetWidth-a.offsetWidth));d=Math.max(0,Math.min(d,c))}a.style.left=b+"px";a.style.top=d+"px";D(this,"drag")};function Event(){this.z=[]}var H;function u(a,b,d){var c=E();if(F(c,a))b=I(c,a,b,d);else{var e="__event__"+b,h=a[e];if(!h){h=[];a[e]=h}h.push(d);b={j:a,n:b,l:v}}b=b;c.z.push(b);c=a.__event_listeners__;if(!c){c=[];a.__event_listeners__=c}c.push(b);return b}function D(){Event.prototype.aa.apply(E(),arguments)}function E(){H||(H=new Event);return H}
Event.prototype.aa=function(a,b){if(F(this,a))throw Error("Cannot trigger DOM events");var d=a["__event__"+b];if(d){for(var c=[],e=2;e<arguments.length;e++)c.push(arguments[e]);for(e=0;e<d.length;e++)d[e].apply(a,c)}};function I(a,b,d,c){a=c;if(b.addEventListener)b.addEventListener(d,c,false);else if(b.attachEvent){a=function(){c.call(b,window.event)};b.attachEvent("on"+d,a)}return{j:b,n:d,l:a}}function F(a,b){return b==window||b==window.document||typeof b.nodeType!="undefined"};function J(a,b,d){d=d||{};var c;if(typeof ActiveXObject!="undefined")c=new ActiveXObject("Microsoft.XMLHTTP");else if(window.XMLHttpRequest)c=new XMLHttpRequest;else throw Error("XMLHttpRequest not supported");if(b)c.onreadystatechange=function(){if(c.readyState==4){b.call(null,c.responseText,c.status);c.onreadystatechange=C}};var e="GET";if(d.t||d.body)e="POST";c.open(e,a,!d.$);if(e=="POST")c.setRequestHeader("Content-Type",d.contentType||"application/x-www-form-urlencoded");d.ba||d.V?c.send(d.body,
d.ba,d.V):c.send(d.body);d.$&&b&&b.call(null,c.responseText,c.status)};function v(a,b){return function(){b.apply(a,arguments)}}function G(a,b){for(var d=0;d<a.length;d++)if(a[d]==b){a.splice(d,1);return true}return false}function C(){return false};function y(a,b,d){K([a],function(c){b(c[0][0],c[0][1])},d)}
function K(a,b,d){var c=document.createElement("div");c.style.position="absolute";c.style.left=-screen.width+"px";c.style.top=-screen.height+"px";c.style.width=(d||screen.width)+"px";c.style.height=screen.height+"px";var e=[];for(d=0;d<a.length;d++){var h=document.createElement("div");h.style.position="absolute";h.style.left="0px";h.style.top="0px";c.appendChild(h);h.appendChild(a[d]);e.push(h)}document.body.appendChild(c);window.setTimeout(function(){for(var o=[],i=0;i<e.length;i++){var q=e[i];o.push([q.offsetWidth,
q.offsetHeight]);q.removeChild(a[i]);q.parentNode.removeChild(q)}c.parentNode.removeChild(c);e=null;b(o)},0)};function L(a,b,d,c,e,h){this.W=a;this.h=b;this.c=d;this.r=c;this.q=e||"";this.m=h||""}f=L.prototype;f.key=function(){return this.h};
f.k=function(a){a=M(this,"div",a,"slide");a.style.position="relative";var b=M(this,"tr",M(this,"tbody",M(this,"table",a)));M(this,"img",M(this,"td",b,"typecol")).src="/static/images/type_"+this.c+".png";this.i=M(this,"input",M(this,"td",b,"titlecol"));this.i.style.position="relative";this.i.value=this.r||"";u(this.i,"keypress",v(this,this.B));u(this.i,"blur",v(this,this.p));u(this.i,"mousedown",z);this.f=M(this,"input",M(this,"td",b,"subtitlecol"));if(this.c!="intro")this.f.disabled=true;u(this.f,
"keypress",v(this,this.B));u(this.f,"blur",v(this,this.p));u(this.f,"mousedown",z);this.f.value=this.q||"";this.e=M(this,"textarea",M(this,"td",b,"contentcol"));this.e.style.width="60%";if(this.c!="normal")this.e.disabled=true;u(this.e,"blur",v(this,this.p));u(this.e,"mousedown",z);this.e.value=this.m||"";b=new B(a,true);u(b,"dragstart",v(this,this.O));u(b,"dragend",v(this,this.N));u(b,"drag",v(this,this.P));u(b,"click",v(this,this.ha));b=this.a=a;b.U=null;b.unselectable="off";b.style.MozUserSelect=
"";return a};f.B=function(a){if(a.keyCode==13){A(a);this.p()}else if(a.keyCode==27){A(a);this.fa()}};f.p=function(){var a=this.i.value!=this.r;if(a)this.r=this.i.value;var b=this.f&&this.f.value!=this.q;if(b)this.q=this.f.value;var d=this.e&&this.e.value!=this.m;if(d)this.m=this.e.value;(d||b||a)&&this.save()};
f.save=function(){var a=["set="+encodeURIComponent(this.W),"type="+encodeURIComponent(this.c),"title="+encodeURIComponent(this.r),"subtitle="+encodeURIComponent(this.q),"content="+encodeURIComponent(this.m)];this.h&&a.push("slide="+encodeURIComponent(this.h));J("/editslide.do",v(this,this.T),{t:true,body:a.join("&")})};f.T=function(a,b){if(b>=200&&b<300)this.h=a};
f.O=function(){var a=document.createElement("div");a.style.width=this.a.offsetWidth+"px";a.style.height=this.a.offsetHeight+"px";this.a.parentNode.insertBefore(a,this.a);x(this.a,0.5);this.b=a};
f.P=function(){for(var a=this.a.parentNode,b=this.a.offsetTop,d=this.a.offsetTop+this.a.offsetHeight,c=a.firstChild;c!=null;c=c.nextSibling)if(!(c==this.a||c==this.b)){var e=c.offsetTop,h=c.offsetTop+c.offsetHeight,o=(e+h)/2;if(!(e>d))if(!(h<b)){if(e<b&&b<o)if(this.b.M!=c){a.removeChild(this.b);a.insertBefore(this.b,c);return}if(d>o)if(c.M!=this.b){a.removeChild(this.b);a.insertBefore(this.b,c.nextSibling);return}}}};
f.N=function(){if(this.b){var a=this.a.parentNode;a.removeChild(this.a);this.a.style.position="relative";this.a.style.width="auto";this.a.style.height="auto";this.a.style.left="auto";this.a.style.top="auto";x(this.a,1);a.insertBefore(this.a,this.b);a.removeChild(this.b);this.b=null;D(this,"positionchanged")}};function M(a,b,d,c){a=document.createElement(b);if(c)a.className=c;d&&d.appendChild(a);return a}function N(a,b){this.h=a;this.w=b}
N.prototype.k=function(a){var b=document.createElement("div");b.className="slidelist";b.style.position="relative";a.appendChild(b);this.a=b;a=[];for(var d=0;d<this.w.length;d++){var c=this.w[d];a.push(c.key());c.k(b).v=c;u(c,"positionchanged",v(this,this.F))}this.C=a};
N.prototype.F=function(){for(var a=[],b=this.a.firstChild;b!=null;b=b.nextSibling)b.v&&a.push(b.v.key());b=false;for(var d=0;d<a.length;d++)if(a[d]!=this.C[d]){b=true;break}if(b){this.C=a;a="slides="+encodeURIComponent(a.join(","));J("/setslidepositions.do",null,{t:true,body:a})}};N.prototype.I=function(a){J("/changetheme.do",null,{t:true,body:"theme="+a+"&id="+this.h})};N.prototype.L=function(a){a=new L(this.h,null,a,"","","");this.w.push(a);a.k(this.a).v=a;u(a,"positionchanged",v(this,this.F))};
window.Slide=L;L.parseList=function(a){function b(){}var d=[];b.prototype=L.prototype;for(var c=0;c<a.length;c++){var e=new b;L.apply(e,a[c]);d.push(e)}return d};L.attachToDOM=L.k;L.save=L.save;window.SlideSet=N;N.prototype.attachToDOM=N.prototype.k;N.prototype.changeTheme=N.prototype.I;N.prototype.newSlide=N.prototype.L;window.DialogBox=t;t.instance=function(){w||(w=new t);return w};t.prototype.show=t.prototype.show;window.download=J;
